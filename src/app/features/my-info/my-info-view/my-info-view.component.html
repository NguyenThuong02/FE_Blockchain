<div class=" bg-bgGray w-full rounded-lg p-10">
    <div class="grid grid-cols-[292px,1fr] size-full bg-[#F7F9FC] rounded-lg shadow-2xl">
        <div class="w-[292px] bg-[#4F4F4F] h-full rounded-lg">
            <div class="flex flex-col items-center text-center  mt-[60px] gap-2">
                <img [src]="avatarPreview" class="size-[212px] rounded-full" alt="">
                <span class="font-bold font-Lexend text-white text-2xl text-wrap">{{fullName}}</span>
                <span class="text-base font-semibold text-white">&#64;{{nameOwner}}</span>
            </div>
            <div class="mt-2 text-base">
                <form class="flex justify-between items-center px-8" [formGroup]="avatarChangeForm">
                    <Label for="avatarImage" 
                        class="cursor-pointer w-full text-center text-[#7dbefa] text-base"
                        [ngClass]="{'hidden' : allowUploadAvatar}">
                        Chỉnh sửa ảnh đại diện
                    </Label>
                    <input 
                        type="file" 
                        id="avatarImage" 
                        name="avatarImage" 
                        class="hidden" 
                        (change)="onAvatarSelected($event)"
                        formControlName="image">
                    <div *ngIf="allowUploadAvatar" class="w-full flex justify-between">
                        <button type="button" (click)="cancelUploadAvatar()" class="ml-2">{{'Button.cancel' | translate}}</button>
                        <button type="button" (click)="uploadAvatarChange()" class="ml-2 text-[#1890FF]">{{'Button.save' | translate}}</button>
                    </div>
                </form>
                <p *ngIf="avatarNotMatchRegex && !allowUploadAvatar" class="text-danger text-center">{{ 'profile.avatarUploadMessage' | translate}}</p>
            </div>
        </div>
        <div class="flex-1 pt-8 px-[50px] bg-[#F7F9FC] rounded-lg pb-3 overflow-y-auto">
            <div class="flex gap-2 justify-center flex-col items-center">
                <div class="flex items-center gap-3">
                    <i class="fa-regular fa-user text-3xl"></i>
                    <span class="font-Lexend text-3xl font-bold">Thông tin cá nhân</span>
                </div>
                <div class="h-8">
                    <div *ngIf="!isEdit" class="text-info text-xs hover:scale-105 mt-2 cursor-pointer"
                    (click)="handleEdit()">Chỉnh sửa thông tin</div>
                </div>
            </div>
            <form class="flex flex-col gap-2 mt-4 p-[1px] " [formGroup]="form">
                <div class="flex w-full gap-9">
                    <div class="flex flex-col flex-1">
                        <span class="mb-2"
                        [ngClass]="!isEdit ? 'font-normal text-[#888]' : 'font-medium text-textColor' "
                        >{{'PopUpRegister.fullName'|translate}}<span class="text-red-500">*</span></span>
                        <mat-form-field class="custom-input " appearance="outline">
                            <input matInput placeholder="Nhập họ và tên" formControlName="fullName" />
                            <mat-error
                                *ngIf="form.get('fullName')?.errors?.['required']&& (form.get('fullName')?.dirty || form.get('fullName')?.touched)"
                                class="text-red-600">
                                {{'PopUpRegister.noEmty'|translate}}
                            </mat-error>
                        </mat-form-field>
                    </div>
                    <div class=" flex flex-col flex-1">
                        <span class="mb-2"
                        [ngClass]="!isEdit ? 'font-normal text-[#888]' : 'font-medium text-textColor' "
                        >Ngày sinh<span class="text-red-500">*</span></span>
                        <mat-form-field class="custom-input " appearance="outline">
                            <input placeholder="Nhập ngày sinh" formControlName="dob" matInput [matDatepicker]="picker2" />
                            <mat-datepicker-toggle matIconSuffix [for]="picker2"></mat-datepicker-toggle>
                            <mat-datepicker #picker2></mat-datepicker>
                            <mat-error
                                *ngIf="form.get('dob')?.errors?.['required']&& (form.get('dob')?.dirty || form.get('dob')?.touched)"
                                class="text-red-600">
                                {{'PopUpRegister.noEmty'|translate}}
                            </mat-error>
                        </mat-form-field>
                    </div>
                </div>
                <div class="flex w-full gap-9">
                    <div class="flex flex-col flex-1">
                        <span class="mb-2"
                        [ngClass]="!isEdit ? 'font-normal text-[#888]' : 'font-medium text-textColor' "
                        >{{'PopUpRegister.phoneNumber'|translate}}<span
                                class="text-red-500 text-[8px] cursor-pointer translate-y-[-5px] px-1 ml-1 inline-block border border-red-500"
                                >i</span></span>
                        <mat-form-field class="custom-input " appearance="outline">
                            <input placeholder="Nhập số điện thoại" matInput formControlName="phoneNumber" maxlength="10" />
                            <mat-error *ngIf="form.get('phoneNumber')?.errors?.['phoneNumberCheck']" class="text-red-600">
                                {{'PopUpRegister.wrongPhoneNumber'|translate}}
                            </mat-error>
        
                        </mat-form-field>
                    </div>
                    <div class="flex flex-col flex-1">
                        <span class="mb-2"
                        [ngClass]="!isEdit ? 'font-normal text-[#888]' : 'font-medium text-textColor' "
                                >Email<span
                                class="text-red-500 text-[8px] cursor-pointer translate-y-[-5px] px-1 ml-1 inline-block border border-red-500"
                                (click)="showAlerEmail()">i</span></span>
                        <div class="flex relative">
                            <mat-form-field class="custom-input   w-full" appearance="outline">
                                <input placeholder="Nhập Email" class="!w-[100%]" matInput formControlName="email" />
                                <mat-error
                                    *ngIf="form.get('email')?.errors?.['email']&& (form.get('email')?.dirty || form.get('email')?.touched)"
                                    class="text-red-600">
                                    {{'PopUpRegister.wrongEmail'|translate}}
                                </mat-error>
                            </mat-form-field>
                            <!-- <span class="absolute text-[12px] top-[36%] right-2 translate-y-[-50%] hover:opacity-70 cursor-pointer"
                                (click)="handleConfirmEmail()">Xác nhận</span> -->
                        </div>
                    </div>
                </div>
                <div class="w-full">
                    <span
                    [ngClass]="!isEdit ? 'font-normal text-[#888]' : 'font-medium text-textColor' "
                    >Địa chỉ thường trú<span class="text-red-500">*</span></span>
                    <div class="flex w-full gap-3 mt-2">
                        <mat-form-field class="custom-input flex-1" appearance="outline">
                            <mat-select placeholder="Tỉnh/Thành" formControlName="provice">
                                <mat-option *ngFor="let city of cityData" (onSelectionChange)="changeCity(city.value)" [value]="city.value">
                                  {{ city.label }}
                                </mat-option>
                            </mat-select>
                            <mat-error
                                *ngIf="form.get('provice')?.errors?.['required']&& (form.get('provice')?.dirty || form.get('provice')?.touched)"
                                class="text-red-600">
                                {{'PopUpRegister.noEmty'|translate}}
                            </mat-error>
                        </mat-form-field>
                        <mat-form-field class="custom-input flex-1" appearance="outline">
                            <mat-select placeholder="Quận/Huyện" formControlName="district">
                                <mat-option *ngFor="let district of districtData" (onSelectionChange)="changeDistrict(district.value)" [value]="district.value">
                                  {{ district.label }}
                                </mat-option>
                            </mat-select>
                            <mat-error
                                *ngIf="form.get('district')?.errors?.['required']&& (form.get('district')?.dirty || form.get('district')?.touched)"
                                class="text-red-600">
                                {{'PopUpRegister.noEmty'|translate}}
                            </mat-error>
                        </mat-form-field>
                        <mat-form-field class="custom-input flex-1" appearance="outline">
                            <mat-select placeholder="Xã/Phường" formControlName="ward">
                                <mat-option *ngFor="let ward of wardsData" [value]="ward.value">
                                  {{ ward.label }}
                                </mat-option>
                            </mat-select>
                            <mat-error
                                *ngIf="form.get('ward')?.errors?.['required']&& (form.get('ward')?.dirty || form.get('ward')?.touched)"
                                class="text-red-600">
                                {{'PopUpRegister.noEmty'|translate}}
                            </mat-error>
                        </mat-form-field>
                    </div>
                </div>
                <div class="flex flex-col w-full">
                    <div class="flex flex-col flex-1">
                        <span class="mb-2"
                        [ngClass]="!isEdit ? 'font-normal text-[#888]' : 'font-medium text-textColor' "
                        >Nơi làm việc</span>
                        <mat-form-field class="custom-input " appearance="outline">
                            <input matInput placeholder="Nhập nơi làm việc" formControlName="workPlace" />
                        </mat-form-field>
                    </div>
                </div>
                <div class="flex gap-3 w-full">
                    <div class="flex flex-col flex-1">
                        <span class="mb-2"
                        [ngClass]="!isEdit ? 'font-normal text-[#888]' : 'font-medium text-textColor' "
                        >Số CCCD/CMT/CMND<span class="text-red-500">*</span></span>
                        <mat-form-field class="custom-input " appearance="outline">
                            <input matInput placeholder="Số CCCD/CMT/CMND" formControlName="idNumber" />
                            <mat-error
                                *ngIf="form.get('idNumber')?.errors?.['required']&& (form.get('idNumber')?.dirty || form.get('idNumber')?.touched)"
                                class="text-red-600">
                                {{'PopUpRegister.noEmty'|translate}}
                            </mat-error>
                        </mat-form-field>
                    </div>
                    <div class=" flex flex-col flex-1">
                        <span class="mb-2"
                        [ngClass]="!isEdit ? 'font-normal text-[#888]' : 'font-medium text-textColor' "
                        >Ngày cấp<span class="text-red-500">*</span></span>
                        <mat-form-field class="custom-input " appearance="outline">
                            <input placeholder="Nhập ngày cấp" formControlName="dateOfIssue" matInput [matDatepicker]="picker3" />
                            <mat-datepicker-toggle matIconSuffix [for]="picker3"></mat-datepicker-toggle>
                            <mat-datepicker #picker3></mat-datepicker>
                            <mat-error
                                *ngIf="form.get('dateOfIssue')?.errors?.['required']&& (form.get('dateOfIssue')?.dirty || form.get('dateOfIssue')?.touched)"
                                class="text-red-600">
                                {{'PopUpRegister.noEmty'|translate}}
                            </mat-error>
                        </mat-form-field>
                    </div>
                    <div class="flex flex-col flex-1">
                        <span class="mb-2"
                        [ngClass]="!isEdit ? 'font-normal text-[#888]' : 'font-medium text-textColor' "
                        >Nơi cấp<span class="text-red-500">*</span></span>
                        <mat-form-field class="custom-input " appearance="outline">
                            <input matInput placeholder="Nhập nơi cấp" formControlName="placeOfIssue" />
                            <mat-error
                                *ngIf="form.get('placeOfIssue')?.errors?.['required']&& (form.get('placeOfIssue')?.dirty || form.get('placeOfIssue')?.touched)"
                                class="text-red-600">
                                {{'PopUpRegister.noEmty'|translate}}
                            </mat-error>
                        </mat-form-field>
                    </div>
                </div>
                <div class="flex flex-col w-full mb-20">
                    <span class="mb-2"
                    [ngClass]="!isEdit ? 'font-normal text-[#888]' : 'font-medium text-textColor' "
                    >Ghi chú cá nhân</span>
                    <mat-form-field class="custom-input " appearance="outline">
                        <textarea matInput placeholder="Nhập ghi chú cá nhân" formControlName="personalNote" rows="5"></textarea>
                    </mat-form-field>
                </div>
            </form>
            <div class="flex justify-center items-center mt-6 h-[76px]">
                <div *ngIf="isEdit" class="w-fit flex gap-6">
                    <button type="button" (click)="handleEdit()"
                        class="w-[124px] py-2 !bg-danger rounded-lg shadow-shadow-timeword font-bold text-[16px] text-white hover:opacity-80">{{"Button.cancel"|translate}}</button>
                    <button type="button" (click)="handleSubmit()"
                        class="w-[124px] py-2 !bg-[#1DC469] rounded-lg shadow-shadow-timeword font-bold text-[16px] text-white hover:opacity-80">{{"Button.save"|translate}}</button>
                </div>
            </div>
        </div>
    </div>
</div>
